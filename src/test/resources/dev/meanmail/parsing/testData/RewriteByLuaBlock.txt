Nginx configuration file(0,1236)
  DirectiveStmtImpl(DIRECTIVE_STMT)(0,230)
    LocationDirectiveStmtImpl(LOCATION_DIRECTIVE_STMT)(0,230)
      LocationStmtImpl(LOCATION_STMT)(0,8)
        PsiElement(NginxTokenType.LOCATION)('location')(0,8)
      PsiWhiteSpace(' ')(8,9)
      LocationModifierStmtImpl(LOCATION_MODIFIER_STMT)(9,9)
        <empty list>
      LocationPathStmtImpl(LOCATION_PATH_STMT)(9,13)
        ValueStmtImpl(VALUE_STMT)(9,13)
          PsiElement(NginxTokenType.VALUE)('/foo')(9,13)
      PsiWhiteSpace(' ')(13,14)
      BlockStmtImpl(BLOCK_STMT)(14,230)
        PsiElement(NginxTokenType.LBRACE)('{')(14,15)
        PsiWhiteSpace('\n    ')(15,20)
        DirectiveStmtImpl(DIRECTIVE_STMT)(20,39)
          RegularDirectiveStmtImpl(REGULAR_DIRECTIVE_STMT)(20,39)
            NameStmtImpl(NAME_STMT)(20,23)
              PsiElement(NginxTokenType.IDENTIFIER)('set')(20,23)
            PsiWhiteSpace('  ')(23,25)
            ValueStmtImpl(VALUE_STMT)(25,27)
              VariableStmtImpl(VARIABLE_STMT)(25,27)
                PsiElement(NginxTokenType.VARIABLE)('$a')(25,27)
            PsiWhiteSpace('         ')(27,36)
            ValueStmtImpl(VALUE_STMT)(36,38)
              PsiElement(NginxTokenType.VALUE)('12')(36,38)
            PsiElement(NginxTokenType.SEMICOLON)(';')(38,39)
        PsiWhiteSpace(' ')(39,40)
        PsiComment(NginxTokenType.COMMENT)('# create and initialize $a')(40,66)
        PsiWhiteSpace('\n    ')(66,71)
        DirectiveStmtImpl(DIRECTIVE_STMT)(71,90)
          RegularDirectiveStmtImpl(REGULAR_DIRECTIVE_STMT)(71,90)
            NameStmtImpl(NAME_STMT)(71,74)
              PsiElement(NginxTokenType.IDENTIFIER)('set')(71,74)
            PsiWhiteSpace('  ')(74,76)
            ValueStmtImpl(VALUE_STMT)(76,78)
              VariableStmtImpl(VARIABLE_STMT)(76,78)
                PsiElement(NginxTokenType.VARIABLE)('$b')(76,78)
            PsiWhiteSpace('         ')(78,87)
            ValueStmtImpl(VALUE_STMT)(87,89)
              StringStmtImpl(STRING_STMT)(87,89)
                PsiElement(NginxTokenType.DQUOTE)('"')(87,88)
                PsiElement(NginxTokenType.DQUOTE)('"')(88,89)
            PsiElement(NginxTokenType.SEMICOLON)(';')(89,90)
        PsiWhiteSpace(' ')(90,91)
        PsiComment(NginxTokenType.COMMENT)('# create and initialize $b')(91,117)
        PsiWhiteSpace('\n    ')(117,122)
        DirectiveStmtImpl(DIRECTIVE_STMT)(122,207)
          LuaDirectiveStmtImpl(LUA_DIRECTIVE_STMT)(122,207)
            LuaStmtImpl(LUA_STMT)(122,142)
              PsiElement(NginxTokenType.LUA_BLOCK_DIRECTIVE)('rewrite_by_lua_block')(122,142)
            PsiWhiteSpace(' ')(142,143)
            LuaBlockStmtImpl(LUA_BLOCK_STMT)(143,207)
              PsiElement(NginxTokenType.LBRACE)('{')(143,144)
              LuaCodeStmtImpl(LUA_CODE_STMT)(144,206)
                PsiElement(NginxTokenType.LUA)('\n                     ngx.var.b = tonumber(ngx.var.a) + 1\n    ')(144,206)
              PsiElement(NginxTokenType.RBRACE)('}')(206,207)
        PsiWhiteSpace('\n    ')(207,212)
        DirectiveStmtImpl(DIRECTIVE_STMT)(212,228)
          RegularDirectiveStmtImpl(REGULAR_DIRECTIVE_STMT)(212,228)
            NameStmtImpl(NAME_STMT)(212,216)
              PsiElement(NginxTokenType.IDENTIFIER)('echo')(212,216)
            PsiWhiteSpace(' ')(216,217)
            ValueStmtImpl(VALUE_STMT)(217,227)
              StringStmtImpl(STRING_STMT)(217,227)
                PsiElement(NginxTokenType.DQUOTE)('"')(217,218)
                PsiElement(NginxTokenType.DQSTRING)('res = $b')(218,226)
                PsiElement(NginxTokenType.DQUOTE)('"')(226,227)
            PsiElement(NginxTokenType.SEMICOLON)(';')(227,228)
        PsiWhiteSpace('\n')(228,229)
        PsiElement(NginxTokenType.RBRACE)('}')(229,230)
  PsiWhiteSpace('\n\n')(230,232)
  DirectiveStmtImpl(DIRECTIVE_STMT)(232,578)
    LocationDirectiveStmtImpl(LOCATION_DIRECTIVE_STMT)(232,578)
      LocationStmtImpl(LOCATION_STMT)(232,240)
        PsiElement(NginxTokenType.LOCATION)('location')(232,240)
      PsiWhiteSpace(' ')(240,241)
      LocationModifierStmtImpl(LOCATION_MODIFIER_STMT)(241,241)
        <empty list>
      LocationPathStmtImpl(LOCATION_PATH_STMT)(241,245)
        ValueStmtImpl(VALUE_STMT)(241,245)
          PsiElement(NginxTokenType.VALUE)('/foo')(241,245)
      PsiWhiteSpace(' ')(245,246)
      BlockStmtImpl(BLOCK_STMT)(246,578)
        PsiElement(NginxTokenType.LBRACE)('{')(246,247)
        PsiWhiteSpace('\n    ')(247,252)
        DirectiveStmtImpl(DIRECTIVE_STMT)(252,262)
          RegularDirectiveStmtImpl(REGULAR_DIRECTIVE_STMT)(252,262)
            NameStmtImpl(NAME_STMT)(252,255)
              PsiElement(NginxTokenType.IDENTIFIER)('set')(252,255)
            PsiWhiteSpace(' ')(255,256)
            ValueStmtImpl(VALUE_STMT)(256,258)
              VariableStmtImpl(VARIABLE_STMT)(256,258)
                PsiElement(NginxTokenType.VARIABLE)('$a')(256,258)
            PsiWhiteSpace(' ')(258,259)
            ValueStmtImpl(VALUE_STMT)(259,261)
              PsiElement(NginxTokenType.VALUE)('12')(259,261)
            PsiElement(NginxTokenType.SEMICOLON)(';')(261,262)
        PsiWhiteSpace(' ')(262,263)
        PsiComment(NginxTokenType.COMMENT)('# create and initialize $a')(263,289)
        PsiWhiteSpace('\n    ')(289,294)
        DirectiveStmtImpl(DIRECTIVE_STMT)(294,304)
          RegularDirectiveStmtImpl(REGULAR_DIRECTIVE_STMT)(294,304)
            NameStmtImpl(NAME_STMT)(294,297)
              PsiElement(NginxTokenType.IDENTIFIER)('set')(294,297)
            PsiWhiteSpace(' ')(297,298)
            ValueStmtImpl(VALUE_STMT)(298,300)
              VariableStmtImpl(VARIABLE_STMT)(298,300)
                PsiElement(NginxTokenType.VARIABLE)('$b')(298,300)
            PsiWhiteSpace(' ')(300,301)
            ValueStmtImpl(VALUE_STMT)(301,303)
              StringStmtImpl(STRING_STMT)(301,303)
                PsiElement(NginxTokenType.QUOTE)(''')(301,302)
                PsiElement(NginxTokenType.QUOTE)(''')(302,303)
            PsiElement(NginxTokenType.SEMICOLON)(';')(303,304)
        PsiWhiteSpace(' ')(304,305)
        PsiComment(NginxTokenType.COMMENT)('# create and initialize $b')(305,331)
        PsiWhiteSpace('\n    ')(331,336)
        DirectiveStmtImpl(DIRECTIVE_STMT)(336,554)
          LuaDirectiveStmtImpl(LUA_DIRECTIVE_STMT)(336,554)
            LuaStmtImpl(LUA_STMT)(336,356)
              PsiElement(NginxTokenType.LUA_BLOCK_DIRECTIVE)('rewrite_by_lua_block')(336,356)
            PsiWhiteSpace(' ')(356,357)
            LuaBlockStmtImpl(LUA_BLOCK_STMT)(357,554)
              PsiElement(NginxTokenType.LBRACE)('{')(357,358)
              LuaCodeStmtImpl(LUA_CODE_STMT)(358,553)
                PsiElement(NginxTokenType.LUA)('\n                     ngx.var.b = tonumber(ngx.var.a) + 1\n                     if tonumber(ngx.var.b) == 13 then\n                         return ngx.redirect("/bar")\n                     end\n    ')(358,553)
              PsiElement(NginxTokenType.RBRACE)('}')(553,554)
        PsiWhiteSpace('\n\n    ')(554,560)
        DirectiveStmtImpl(DIRECTIVE_STMT)(560,576)
          RegularDirectiveStmtImpl(REGULAR_DIRECTIVE_STMT)(560,576)
            NameStmtImpl(NAME_STMT)(560,564)
              PsiElement(NginxTokenType.IDENTIFIER)('echo')(560,564)
            PsiWhiteSpace(' ')(564,565)
            ValueStmtImpl(VALUE_STMT)(565,575)
              StringStmtImpl(STRING_STMT)(565,575)
                PsiElement(NginxTokenType.DQUOTE)('"')(565,566)
                PsiElement(NginxTokenType.DQSTRING)('res = $b')(566,574)
                PsiElement(NginxTokenType.DQUOTE)('"')(574,575)
            PsiElement(NginxTokenType.SEMICOLON)(';')(575,576)
        PsiWhiteSpace('\n')(576,577)
        PsiElement(NginxTokenType.RBRACE)('}')(577,578)
  PsiWhiteSpace('\n\n')(578,580)
  DirectiveStmtImpl(DIRECTIVE_STMT)(580,764)
    LocationDirectiveStmtImpl(LOCATION_DIRECTIVE_STMT)(580,764)
      LocationStmtImpl(LOCATION_STMT)(580,588)
        PsiElement(NginxTokenType.LOCATION)('location')(580,588)
      PsiWhiteSpace(' ')(588,589)
      LocationModifierStmtImpl(LOCATION_MODIFIER_STMT)(589,589)
        <empty list>
      LocationPathStmtImpl(LOCATION_PATH_STMT)(589,590)
        ValueStmtImpl(VALUE_STMT)(589,590)
          PsiElement(NginxTokenType.VALUE)('/')(589,590)
      PsiWhiteSpace(' ')(590,591)
      BlockStmtImpl(BLOCK_STMT)(591,764)
        PsiElement(NginxTokenType.LBRACE)('{')(591,592)
        PsiWhiteSpace('\n    ')(592,597)
        DirectiveStmtImpl(DIRECTIVE_STMT)(597,660)
          RegularDirectiveStmtImpl(REGULAR_DIRECTIVE_STMT)(597,660)
            NameStmtImpl(NAME_STMT)(597,601)
              PsiElement(NginxTokenType.IDENTIFIER)('eval')(597,601)
            PsiWhiteSpace(' ')(601,602)
            ValueStmtImpl(VALUE_STMT)(602,606)
              VariableStmtImpl(VARIABLE_STMT)(602,606)
                PsiElement(NginxTokenType.VARIABLE)('$res')(602,606)
            PsiWhiteSpace(' ')(606,607)
            BlockStmtImpl(BLOCK_STMT)(607,660)
              PsiElement(NginxTokenType.LBRACE)('{')(607,608)
              PsiWhiteSpace('\n        ')(608,617)
              DirectiveStmtImpl(DIRECTIVE_STMT)(617,654)
                RegularDirectiveStmtImpl(REGULAR_DIRECTIVE_STMT)(617,654)
                  NameStmtImpl(NAME_STMT)(617,627)
                    PsiElement(NginxTokenType.IDENTIFIER)('proxy_pass')(617,627)
                  PsiWhiteSpace(' ')(627,628)
                  ValueStmtImpl(VALUE_STMT)(628,653)
                    PsiElement(NginxTokenType.VALUE)('http://foo.com/check-spam')(628,653)
                  PsiElement(NginxTokenType.SEMICOLON)(';')(653,654)
              PsiWhiteSpace('\n    ')(654,659)
              PsiElement(NginxTokenType.RBRACE)('}')(659,660)
        PsiWhiteSpace('\n\n    ')(660,666)
        DirectiveStmtImpl(DIRECTIVE_STMT)(666,739)
          IfDirectiveStmtImpl(IF_DIRECTIVE_STMT)(666,739)
            IfStmtImpl(IF_STMT)(666,668)
              PsiElement(NginxTokenType.IF)('if')(666,668)
            PsiWhiteSpace(' ')(668,669)
            IfParenStmtImpl(IF_PAREN_STMT)(669,684)
              PsiElement(NginxTokenType.LPAREN)('(')(669,670)
              ConditionStmtImpl(CONDITION_STMT)(670,683)
                ConditionExprImpl(CONDITION_EXPR)(670,674)
                  VariableStmtImpl(VARIABLE_STMT)(670,674)
                    PsiElement(NginxTokenType.VARIABLE)('$res')(670,674)
                PsiWhiteSpace(' ')(674,675)
                PsiElement(NginxTokenType.EQUAL)('=')(675,676)
                PsiWhiteSpace(' ')(676,677)
                ConditionExprImpl(CONDITION_EXPR)(677,683)
                  StringStmtImpl(STRING_STMT)(677,683)
                    PsiElement(NginxTokenType.QUOTE)(''')(677,678)
                    PsiElement(NginxTokenType.STRING)('spam')(678,682)
                    PsiElement(NginxTokenType.QUOTE)(''')(682,683)
              PsiElement(NginxTokenType.RPAREN)(')')(683,684)
            PsiWhiteSpace(' ')(684,685)
            BlockStmtImpl(BLOCK_STMT)(685,739)
              PsiElement(NginxTokenType.LBRACE)('{')(685,686)
              PsiWhiteSpace('\n        ')(686,695)
              DirectiveStmtImpl(DIRECTIVE_STMT)(695,733)
                RegularDirectiveStmtImpl(REGULAR_DIRECTIVE_STMT)(695,733)
                  NameStmtImpl(NAME_STMT)(695,702)
                    PsiElement(NginxTokenType.IDENTIFIER)('rewrite')(695,702)
                  PsiWhiteSpace(' ')(702,703)
                  ValueStmtImpl(VALUE_STMT)(703,704)
                    PsiElement(NginxTokenType.VALUE)('^')(703,704)
                  PsiWhiteSpace(' ')(704,705)
                  ValueStmtImpl(VALUE_STMT)(705,723)
                    PsiElement(NginxTokenType.VALUE)('/terms-of-use.html')(705,723)
                  PsiWhiteSpace(' ')(723,724)
                  ValueStmtImpl(VALUE_STMT)(724,732)
                    PsiElement(NginxTokenType.IDENTIFIER)('redirect')(724,732)
                  PsiElement(NginxTokenType.SEMICOLON)(';')(732,733)
              PsiWhiteSpace('\n    ')(733,738)
              PsiElement(NginxTokenType.RBRACE)('}')(738,739)
        PsiWhiteSpace('\n\n    ')(739,745)
        DirectiveStmtImpl(DIRECTIVE_STMT)(745,762)
          RegularDirectiveStmtImpl(REGULAR_DIRECTIVE_STMT)(745,762)
            NameStmtImpl(NAME_STMT)(745,757)
              PsiElement(NginxTokenType.IDENTIFIER)('fastcgi_pass')(745,757)
            PsiWhiteSpace(' ')(757,758)
            ValueStmtImpl(VALUE_STMT)(758,761)
              PsiElement(NginxTokenType.VALUE)('...')(758,761)
            PsiElement(NginxTokenType.SEMICOLON)(';')(761,762)
        PsiWhiteSpace('\n')(762,763)
        PsiElement(NginxTokenType.RBRACE)('}')(763,764)
  PsiWhiteSpace('\n\n')(764,766)
  DirectiveStmtImpl(DIRECTIVE_STMT)(766,848)
    LocationDirectiveStmtImpl(LOCATION_DIRECTIVE_STMT)(766,848)
      LocationStmtImpl(LOCATION_STMT)(766,774)
        PsiElement(NginxTokenType.LOCATION)('location')(766,774)
      PsiWhiteSpace(' ')(774,775)
      LocationModifierStmtImpl(LOCATION_MODIFIER_STMT)(775,776)
        PsiElement(NginxTokenType.EQUAL)('=')(775,776)
      PsiWhiteSpace(' ')(776,777)
      LocationPathStmtImpl(LOCATION_PATH_STMT)(777,788)
        ValueStmtImpl(VALUE_STMT)(777,788)
          PsiElement(NginxTokenType.VALUE)('/check-spam')(777,788)
      PsiWhiteSpace(' ')(788,789)
      BlockStmtImpl(BLOCK_STMT)(789,848)
        PsiElement(NginxTokenType.LBRACE)('{')(789,790)
        PsiWhiteSpace('\n    ')(790,795)
        DirectiveStmtImpl(DIRECTIVE_STMT)(795,804)
          RegularDirectiveStmtImpl(REGULAR_DIRECTIVE_STMT)(795,804)
            NameStmtImpl(NAME_STMT)(795,803)
              PsiElement(NginxTokenType.IDENTIFIER)('internal')(795,803)
            PsiElement(NginxTokenType.SEMICOLON)(';')(803,804)
        PsiWhiteSpace('\n    ')(804,809)
        DirectiveStmtImpl(DIRECTIVE_STMT)(809,846)
          RegularDirectiveStmtImpl(REGULAR_DIRECTIVE_STMT)(809,846)
            NameStmtImpl(NAME_STMT)(809,819)
              PsiElement(NginxTokenType.IDENTIFIER)('proxy_pass')(809,819)
            PsiWhiteSpace(' ')(819,820)
            ValueStmtImpl(VALUE_STMT)(820,845)
              PsiElement(NginxTokenType.VALUE)('http://foo.com/check-spam')(820,845)
            PsiElement(NginxTokenType.SEMICOLON)(';')(845,846)
        PsiWhiteSpace('\n')(846,847)
        PsiElement(NginxTokenType.RBRACE)('}')(847,848)
  PsiWhiteSpace('\n\n')(848,850)
  DirectiveStmtImpl(DIRECTIVE_STMT)(850,1129)
    LocationDirectiveStmtImpl(LOCATION_DIRECTIVE_STMT)(850,1129)
      LocationStmtImpl(LOCATION_STMT)(850,858)
        PsiElement(NginxTokenType.LOCATION)('location')(850,858)
      PsiWhiteSpace(' ')(858,859)
      LocationModifierStmtImpl(LOCATION_MODIFIER_STMT)(859,859)
        <empty list>
      LocationPathStmtImpl(LOCATION_PATH_STMT)(859,860)
        ValueStmtImpl(VALUE_STMT)(859,860)
          PsiElement(NginxTokenType.VALUE)('/')(859,860)
      PsiWhiteSpace(' ')(860,861)
      BlockStmtImpl(BLOCK_STMT)(861,1129)
        PsiElement(NginxTokenType.LBRACE)('{')(861,862)
        PsiWhiteSpace('\n    ')(862,867)
        DirectiveStmtImpl(DIRECTIVE_STMT)(867,1104)
          LuaDirectiveStmtImpl(LUA_DIRECTIVE_STMT)(867,1104)
            LuaStmtImpl(LUA_STMT)(867,887)
              PsiElement(NginxTokenType.LUA_BLOCK_DIRECTIVE)('rewrite_by_lua_block')(867,887)
            PsiWhiteSpace(' ')(887,888)
            LuaBlockStmtImpl(LUA_BLOCK_STMT)(888,1104)
              PsiElement(NginxTokenType.LBRACE)('{')(888,889)
              LuaCodeStmtImpl(LUA_CODE_STMT)(889,1103)
                PsiElement(NginxTokenType.LUA)('\n                     local res = ngx.location.capture("/check-spam")\n                     if res.body == "spam" then\n                         return ngx.redirect("/terms-of-use.html")\n                     end\n    ')(889,1103)
              PsiElement(NginxTokenType.RBRACE)('}')(1103,1104)
        PsiWhiteSpace('\n\n    ')(1104,1110)
        DirectiveStmtImpl(DIRECTIVE_STMT)(1110,1127)
          RegularDirectiveStmtImpl(REGULAR_DIRECTIVE_STMT)(1110,1127)
            NameStmtImpl(NAME_STMT)(1110,1122)
              PsiElement(NginxTokenType.IDENTIFIER)('fastcgi_pass')(1110,1122)
            PsiWhiteSpace(' ')(1122,1123)
            ValueStmtImpl(VALUE_STMT)(1123,1126)
              PsiElement(NginxTokenType.VALUE)('...')(1123,1126)
            PsiElement(NginxTokenType.SEMICOLON)(';')(1126,1127)
        PsiWhiteSpace('\n')(1127,1128)
        PsiElement(NginxTokenType.RBRACE)('}')(1128,1129)
  PsiWhiteSpace('\n\n')(1129,1131)
  DirectiveStmtImpl(DIRECTIVE_STMT)(1131,1236)
    LocationDirectiveStmtImpl(LOCATION_DIRECTIVE_STMT)(1131,1236)
      LocationStmtImpl(LOCATION_STMT)(1131,1139)
        PsiElement(NginxTokenType.LOCATION)('location')(1131,1139)
      PsiWhiteSpace(' ')(1139,1140)
      LocationModifierStmtImpl(LOCATION_MODIFIER_STMT)(1140,1140)
        <empty list>
      LocationPathStmtImpl(LOCATION_PATH_STMT)(1140,1144)
        ValueStmtImpl(VALUE_STMT)(1140,1144)
          PsiElement(NginxTokenType.VALUE)('/foo')(1140,1144)
      PsiWhiteSpace(' ')(1144,1145)
      BlockStmtImpl(BLOCK_STMT)(1145,1236)
        PsiElement(NginxTokenType.LBRACE)('{')(1145,1146)
        PsiWhiteSpace('\n    ')(1146,1151)
        DirectiveStmtImpl(DIRECTIVE_STMT)(1151,1166)
          RegularDirectiveStmtImpl(REGULAR_DIRECTIVE_STMT)(1151,1166)
            NameStmtImpl(NAME_STMT)(1151,1158)
              PsiElement(NginxTokenType.IDENTIFIER)('rewrite')(1151,1158)
            PsiWhiteSpace(' ')(1158,1159)
            ValueStmtImpl(VALUE_STMT)(1159,1160)
              PsiElement(NginxTokenType.VALUE)('^')(1159,1160)
            PsiWhiteSpace(' ')(1160,1161)
            ValueStmtImpl(VALUE_STMT)(1161,1165)
              PsiElement(NginxTokenType.VALUE)('/bar')(1161,1165)
            PsiElement(NginxTokenType.SEMICOLON)(';')(1165,1166)
        PsiWhiteSpace('\n    ')(1166,1171)
        DirectiveStmtImpl(DIRECTIVE_STMT)(1171,1234)
          LuaDirectiveStmtImpl(LUA_DIRECTIVE_STMT)(1171,1234)
            LuaStmtImpl(LUA_STMT)(1171,1191)
              PsiElement(NginxTokenType.LUA_BLOCK_DIRECTIVE)('rewrite_by_lua_block')(1171,1191)
            PsiWhiteSpace(' ')(1191,1192)
            LuaBlockStmtImpl(LUA_BLOCK_STMT)(1192,1234)
              PsiElement(NginxTokenType.LBRACE)('{')(1192,1193)
              LuaCodeStmtImpl(LUA_CODE_STMT)(1193,1233)
                PsiElement(NginxTokenType.LUA)('\n                     ngx.exit(503)\n    ')(1193,1233)
              PsiElement(NginxTokenType.RBRACE)('}')(1233,1234)
        PsiWhiteSpace('\n')(1234,1235)
        PsiElement(NginxTokenType.RBRACE)('}')(1235,1236)