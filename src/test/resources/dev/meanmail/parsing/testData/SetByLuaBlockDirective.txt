Nginx configuration file(0,498)
  DirectiveStmtImpl(DIRECTIVE_STMT)(0,377)
    LocationDirectiveStmtImpl(LOCATION_DIRECTIVE_STMT)(0,377)
      LocationStmtImpl(LOCATION_STMT)(0,8)
        PsiElement(NginxTokenType.LOCATION)('location')(0,8)
      PsiWhiteSpace(' ')(8,9)
      LocationModifierStmtImpl(LOCATION_MODIFIER_STMT)(9,9)
        <empty list>
      LocationPathStmtImpl(LOCATION_PATH_STMT)(9,13)
        ValueStmtImpl(VALUE_STMT)(9,13)
          PsiElement(NginxTokenType.VALUE)('/foo')(9,13)
      PsiWhiteSpace(' ')(13,14)
      BlockStmtImpl(BLOCK_STMT)(14,377)
        PsiElement(NginxTokenType.LBRACE)('{')(14,15)
        PsiWhiteSpace('\n    ')(15,20)
        DirectiveStmtImpl(DIRECTIVE_STMT)(20,33)
          RegularDirectiveStmtImpl(REGULAR_DIRECTIVE_STMT)(20,33)
            NameStmtImpl(NAME_STMT)(20,23)
              PsiElement(NginxTokenType.IDENTIFIER)('set')(20,23)
            PsiWhiteSpace(' ')(23,24)
            ValueStmtImpl(VALUE_STMT)(24,29)
              VariableStmtImpl(VARIABLE_STMT)(24,29)
                PsiElement(NginxTokenType.VARIABLE)('$diff')(24,29)
            PsiWhiteSpace(' ')(29,30)
            ValueStmtImpl(VALUE_STMT)(30,32)
              StringStmtImpl(STRING_STMT)(30,32)
                PsiElement(NginxTokenType.QUOTE)(''')(30,31)
                PsiElement(NginxTokenType.QUOTE)(''')(31,32)
            PsiElement(NginxTokenType.SEMICOLON)(';')(32,33)
        PsiWhiteSpace(' ')(33,34)
        PsiComment(NginxTokenType.COMMENT)('# we have to predefine the $diff variable here')(34,80)
        PsiWhiteSpace('\n\n    ')(80,86)
        DirectiveStmtImpl(DIRECTIVE_STMT)(86,337)
          LuaDirectiveStmtImpl(LUA_DIRECTIVE_STMT)(86,337)
            LuaStmtImpl(LUA_STMT)(86,102)
              PsiElement(NginxTokenType.LUA_BLOCK_DIRECTIVE)('set_by_lua_block')(86,102)
            PsiWhiteSpace(' ')(102,103)
            ValueStmtImpl(VALUE_STMT)(103,107)
              VariableStmtImpl(VARIABLE_STMT)(103,107)
                PsiElement(NginxTokenType.VARIABLE)('$sum')(103,107)
            PsiWhiteSpace(' ')(107,108)
            LuaBlockStmtImpl(LUA_BLOCK_STMT)(108,337)
              PsiElement(NginxTokenType.LBRACE)('{')(108,109)
              LuaCodeStmtImpl(LUA_CODE_STMT)(109,336)
                PsiElement(NginxTokenType.LUA)('\n\n\n\n                     local a = 32\n                     local b = 56\n\n                     ngx.var.diff = a - b  -- write to $diff directly\n                     return a + b          -- return the $sum value normally\n\n\n\n    ')(109,336)
              PsiElement(NginxTokenType.RBRACE)('}')(336,337)
        PsiWhiteSpace('\n\n    ')(337,343)
        DirectiveStmtImpl(DIRECTIVE_STMT)(343,375)
          RegularDirectiveStmtImpl(REGULAR_DIRECTIVE_STMT)(343,375)
            NameStmtImpl(NAME_STMT)(343,347)
              PsiElement(NginxTokenType.IDENTIFIER)('echo')(343,347)
            PsiWhiteSpace(' ')(347,348)
            ValueStmtImpl(VALUE_STMT)(348,374)
              StringStmtImpl(STRING_STMT)(348,374)
                PsiElement(NginxTokenType.DQUOTE)('"')(348,349)
                PsiElement(NginxTokenType.DQSTRING)('sum = $sum, diff = $diff')(349,373)
                PsiElement(NginxTokenType.DQUOTE)('"')(373,374)
            PsiElement(NginxTokenType.SEMICOLON)(';')(374,375)
        PsiWhiteSpace('\n')(375,376)
        PsiElement(NginxTokenType.RBRACE)('}')(376,377)
  PsiWhiteSpace('\n\n')(377,379)
  DirectiveStmtImpl(DIRECTIVE_STMT)(379,391)
    RegularDirectiveStmtImpl(REGULAR_DIRECTIVE_STMT)(379,391)
      NameStmtImpl(NAME_STMT)(379,382)
        PsiElement(NginxTokenType.IDENTIFIER)('set')(379,382)
      PsiWhiteSpace(' ')(382,383)
      ValueStmtImpl(VALUE_STMT)(383,387)
        VariableStmtImpl(VARIABLE_STMT)(383,387)
          PsiElement(NginxTokenType.VARIABLE)('$foo')(383,387)
      PsiWhiteSpace(' ')(387,388)
      ValueStmtImpl(VALUE_STMT)(388,390)
        PsiElement(NginxTokenType.VALUE)('32')(388,390)
      PsiElement(NginxTokenType.SEMICOLON)(';')(390,391)
  PsiWhiteSpace('\n')(391,392)
  DirectiveStmtImpl(DIRECTIVE_STMT)(392,455)
    LuaDirectiveStmtImpl(LUA_DIRECTIVE_STMT)(392,455)
      LuaStmtImpl(LUA_STMT)(392,408)
        PsiElement(NginxTokenType.LUA_BLOCK_DIRECTIVE)('set_by_lua_block')(392,408)
      PsiWhiteSpace(' ')(408,409)
      ValueStmtImpl(VALUE_STMT)(409,413)
        VariableStmtImpl(VARIABLE_STMT)(409,413)
          PsiElement(NginxTokenType.VARIABLE)('$bar')(409,413)
      PsiWhiteSpace(' ')(413,414)
      LuaBlockStmtImpl(LUA_BLOCK_STMT)(414,455)
        PsiElement(NginxTokenType.LBRACE)('{')(414,415)
        LuaCodeStmtImpl(LUA_CODE_STMT)(415,454)
          PsiElement(NginxTokenType.LUA)('\n\n\n return tonumber(ngx.var.foo) + 1\n\n\n')(415,454)
        PsiElement(NginxTokenType.RBRACE)('}')(454,455)
  PsiWhiteSpace('\n')(455,456)
  DirectiveStmtImpl(DIRECTIVE_STMT)(456,477)
    RegularDirectiveStmtImpl(REGULAR_DIRECTIVE_STMT)(456,477)
      NameStmtImpl(NAME_STMT)(456,459)
        PsiElement(NginxTokenType.IDENTIFIER)('set')(456,459)
      PsiWhiteSpace(' ')(459,460)
      ValueStmtImpl(VALUE_STMT)(460,464)
        VariableStmtImpl(VARIABLE_STMT)(460,464)
          PsiElement(NginxTokenType.VARIABLE)('$baz')(460,464)
      PsiWhiteSpace(' ')(464,465)
      ValueStmtImpl(VALUE_STMT)(465,476)
        StringStmtImpl(STRING_STMT)(465,476)
          PsiElement(NginxTokenType.DQUOTE)('"')(465,466)
          PsiElement(NginxTokenType.DQSTRING)('bar: $bar')(466,475)
          PsiElement(NginxTokenType.DQUOTE)('"')(475,476)
      PsiElement(NginxTokenType.SEMICOLON)(';')(476,477)
  PsiWhiteSpace('  ')(477,479)
  PsiComment(NginxTokenType.COMMENT)('# $baz == "bar: 33"')(479,498)